#include "pinta_tests.h"

PINTA_TEST_BEGIN(encoding_decode_long_utf8, 2)
{
    PintaReference *string;
    u8 utf8_data[] = { 35, 58, 32, 49, 50, 49, 32, 225, 131, 163, 225, 131, 144, 225, 131, 160, 225, 131, 167, 225, 131, 157, 225, 131, 164, 225, 131, 144, 44, 32, 225, 131, 169, 225, 131, 144, 225, 131, 155, 225, 131, 157, 225, 131, 144, 225, 131, 160, 225, 131, 151, 225, 131, 149, 225, 131, 152, 225, 131, 151, 32, 225, 131, 145, 225, 131, 144, 225, 131, 160, 225, 131, 144, 225, 131, 151, 225, 131, 152, 44, 32, 225, 131, 147, 225, 131, 144, 225, 131, 163, 225, 131, 153, 225, 131, 144, 225, 131, 149, 225, 131, 168, 225, 131, 152, 225, 131, 160, 225, 131, 147, 225, 131, 152, 225, 131, 151, 32, 225, 131, 155, 225, 131, 157, 225, 131, 155, 225, 131, 161, 225, 131, 144, 225, 131, 174, 225, 131, 163, 225, 131, 160, 225, 131, 148, 32, 225, 131, 145, 225, 131, 144, 225, 131, 156, 225, 131, 153, 225, 131, 152, 225, 131, 161, 32, 225, 131, 163, 225, 131, 161, 225, 131, 144, 225, 131, 164, 225, 131, 160, 225, 131, 151, 225, 131, 174, 225, 131, 157, 225, 131, 148, 225, 131, 145, 225, 131, 152, 225, 131, 161, 32, 225, 131, 147, 225, 131, 148, 225, 131, 158, 225, 131, 144, 225, 131, 160, 225, 131, 162, 225, 131, 144, 225, 131, 155, 225, 131, 148, 225, 131, 156, 225, 131, 162, 225, 131, 161 };
    u32 utf8_data_length = 238;
    u32 string_length;

    string = PINTA_GC_LOCAL(0);

    PINTA_CHECK(pinta_lib_decode_utf8(core, utf8_data, utf8_data_length, string));

    sput_fail_if(string->reference == NULL, "string->reference == NULL");

    string_length = pinta_string_ref_get_length(string);
    sput_fail_if(string_length != 90, "string_length != 90");
}
PINTA_TEST_END(PINTA_OK)

void pinta_tests_encoding()
{
    sput_enter_suite("Encoding tests");
    encoding_decode_long_utf8();
    sput_leave_suite();
}
